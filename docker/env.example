# Morgan Docker Environment Configuration
# Copy this file to .env and customize values
#
# Usage:
#   cp env.example .env
#   # Edit .env with your values
#   docker compose up -d

# ============================================
# Hugging Face Configuration (Model Downloads)
# ============================================

# Hugging Face API Token
# Required for downloading gated models (e.g., some Jina models)
# Get your token at: https://huggingface.co/settings/tokens
# Leave empty if only using public models
HF_TOKEN=

# Alternative HF token variable names (for compatibility)
# HUGGING_FACE_HUB_TOKEN=
# HUGGINGFACE_TOKEN=

# ============================================
# LLM Configuration (Ollama)
# ============================================

# Ollama endpoint (use host.docker.internal for local Ollama)
MORGAN_LLM_ENDPOINT=http://host.docker.internal:11434

# Main LLM model (for complex reasoning)
MORGAN_LLM_MODEL=qwen2.5:32b-instruct-q4_K_M

# Fast LLM model (for simple queries)
MORGAN_LLM_FAST_MODEL=qwen2.5:7b-instruct-q5_K_M

# Load balancing strategy: round_robin, random, least_loaded
MORGAN_LLM_STRATEGY=round_robin

# Distributed LLM endpoints (comma-separated, for multi-host setup)
# MORGAN_LLM_ENDPOINTS=http://192.168.1.20:11434/v1,http://192.168.1.21:11434/v1

# ============================================
# Embedding Configuration (Qwen3-Embedding via Ollama)
# ============================================

# Embedding provider: ollama (recommended), local
MORGAN_EMBEDDING_PROVIDER=ollama

# Embedding model name (Qwen3-Embedding via Ollama)
# Options: qwen3-embedding:0.6b (896 dims), :4b (2048 dims), :8b (4096 dims)
MORGAN_EMBEDDING_MODEL=qwen3-embedding:4b

# Embedding dimensions (must match model)
# - 0.6b: 896, 4b: 2048, 8b: 4096
MORGAN_EMBEDDING_DIMENSIONS=2048

# Embedding device (cpu or cuda)
MORGAN_EMBEDDING_DEVICE=cpu

# Remote embedding endpoint (optional, for distributed setup)
# MORGAN_EMBEDDING_ENDPOINT=http://192.168.1.22:11434/v1

# ============================================
# Reranking Configuration
# ============================================

# Reranking model (CrossEncoder)
MORGAN_RERANKING_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# Remote reranking endpoint (optional, for distributed setup)
# MORGAN_RERANKING_ENDPOINT=http://192.168.1.23:8080/rerank

# ============================================
# Vector Database (Qdrant)
# ============================================

# Qdrant URL (use container name in compose)
MORGAN_VECTOR_DB_URL=http://qdrant:6333

# Qdrant API key (optional)
# MORGAN_VECTOR_DB_API_KEY=

# ============================================
# Redis (Session/Cache Storage)
# ============================================

# Redis URL
MORGAN_REDIS_URL=redis://redis:6379/0

# Redis password (optional)
# MORGAN_REDIS_PASSWORD=

# Redis key prefix
MORGAN_REDIS_PREFIX=morgan:

# ============================================
# Cache Configuration
# ============================================

# Cache backend: memory, redis
MORGAN_CACHE_BACKEND=redis

# Cache size in MB
MORGAN_CACHE_SIZE_MB=1000

# Session backend: memory, redis
MORGAN_SESSION_BACKEND=redis

# Session TTL in seconds
MORGAN_SESSION_TTL=3600

# ============================================
# Model Cache (Persistent Storage)
# ============================================

# Model cache directory (inside container)
MORGAN_MODEL_CACHE=/app/models

# ============================================
# Feature Flags
# ============================================

# Enable multi-step reasoning
MORGAN_REASONING_ENABLED=true

# Max reasoning steps
MORGAN_REASONING_MAX_STEPS=10

# Enable proactive suggestions
MORGAN_PROACTIVE_ENABLED=true

# Max proactive suggestions
MORGAN_PROACTIVE_SUGGESTIONS_MAX=5

# ============================================
# Logging
# ============================================

# Log level: DEBUG, INFO, WARNING, ERROR
MORGAN_LOG_LEVEL=INFO

# Log format: json, text
MORGAN_LOG_FORMAT=json

# ============================================
# Performance
# ============================================

# Max concurrent requests
MORGAN_MAX_CONCURRENT=100

# Request timeout in seconds
MORGAN_REQUEST_TIMEOUT=60

# Number of workers
MORGAN_WORKERS=4

# ============================================
# Distributed Configuration
# ============================================

# Path to distributed config YAML
MORGAN_DISTRIBUTED_CONFIG=/app/config/distributed.yaml

# ============================================
# Monitoring (Optional)
# ============================================

# Grafana admin credentials (MUST change in production!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_IN_PRODUCTION

